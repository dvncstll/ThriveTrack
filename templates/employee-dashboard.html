<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Employee Well-being Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    :root {
      --bg: #f4f7f8;
      --card: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --line: #e5e7eb;
      --teal-50:#e6fbf7; --teal-200:#b7d7d2; --teal-600:#2c6d62;
      --green-50:#ecfdf5; --green-600:#059669;
      --cyan-50:#e6fafe; --cyan-600:#0891b2;
      --amber-50:#fff7ed; --amber-600:#d97706;
      --rose-50:#fef2f2; --rose-600:#dc2626;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    }
    .shell {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr;
    }
    @media (min-width: 960px) {
      .shell { grid-template-columns: 260px minmax(0,1fr); }
    }

    /* Sidebar */
    .sidebar {
      display: none;
    }
    @media (min-width: 960px) {
      .sidebar {
        display: flex;
        position: sticky; top: 0; height: 100vh;
        flex-direction: column; gap: 14px;
        background: var(--card);
        border-right: 1px solid var(--line);
        padding: 16px;
      }
    }
    .profile {
      display: flex; gap: 12px; align-items: center;
      background: #f8fafc; border-radius: 16px; padding: 12px;
    }
    .avatar { width: 40px; height: 40px; border-radius: 999px; background: linear-gradient(135deg,#14b8a6,#0f766e); }
    .muted { color: var(--muted); }
    .nav button {
      width: 100%; text-align: left;
      padding: 10px 12px; border: 0; background: transparent; cursor: pointer;
      border-radius: 12px; color: #0f172a; font-size: 14px;
    }
    .nav button:hover { background: #f8fafc; }
    .nav button.active { background: #eef2f7; font-weight: 600; }
    .logout {
      margin-top: auto; width: 100%; border: 1px solid var(--line); background: #fff;
      padding: 10px 12px; border-radius: 12px; cursor: pointer;
    }

    /* Main */
    main { padding: 16px; }
    @media (min-width: 960px) { main { padding: 32px; } }
    
    .header {
      text-align: center;
      margin-bottom: 32px;
    }
    .welcome {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--teal-600);
    }
    .subtitle {
      color: var(--muted);
      font-size: 16px;
    }
    
    .grid { display: grid; gap: 24px; }
    .grid.cols-2 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
    @media (min-width: 768px) { .grid.cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    
    .grid.cols-3 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
    @media (min-width: 768px) { .grid.cols-3 { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    @media (min-width: 1200px) { .grid.cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); } }
    
    .card { 
      background: var(--card); 
      border: 1px solid var(--line); 
      border-radius: 16px; 
      padding: 24px; 
      box-shadow: 0 1px 2px rgba(0,0,0,.04); 
    }
    .card h3 { margin: 0 0 16px; font-size: 18px; font-weight: 600; }
    
    .stat {
      border: 1px solid var(--line); 
      border-radius: 16px; 
      padding: 20px; 
      box-shadow: 0 1px 2px rgba(0,0,0,.04);
      display: grid; 
      grid-template-columns: auto 1fr; 
      align-items: center; 
      gap: 16px;
    }
    .tone-teal { background: var(--teal-50); color: #0b3b35; }
    .tone-green { background: var(--green-50); color: #064e3b; }
    .tone-cyan { background: var(--cyan-50); color: #083344; }
    .tone-amber { background: var(--amber-50); color: #7c2d12; }
    .stat .value { font-size: 32px; font-weight: 700; text-align: right; }
    .stat .label { font-size: 14px; opacity: .7; text-align: right; }
    
    .chart-wrap { height: 300px; margin-top: 16px; }
    
    .wellbeing-score {
      text-align: center;
      padding: 32px;
    }
    .score-circle {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      margin: 0 auto 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      font-weight: 700;
      color: white;
    }
    .score-excellent { background: var(--green-600); }
    .score-good { background: var(--cyan-600); }
    .score-average { background: var(--amber-600); }
    .score-poor { background: var(--rose-600); }
    
    .mood-tracker {
      display: grid;
      gap: 12px;
    }
    .mood-option {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border: 1px solid var(--line);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .mood-option:hover {
      background: var(--teal-50);
      border-color: var(--teal-200);
    }
    .mood-option.selected {
      background: var(--teal-50);
      border-color: var(--teal-600);
    }
    .mood-emoji { font-size: 24px; }
    
    .tips-section {
      background: var(--teal-50);
      border: 1px solid var(--teal-200);
      border-radius: 12px;
      padding: 20px;
      margin-top: 20px;
    }
    .tips-section h4 {
      margin: 0 0 12px;
      color: var(--teal-600);
      font-size: 16px;
    }
    .tip-item {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      margin-bottom: 8px;
      font-size: 14px;
      line-height: 1.4;
    }
    .tip-icon {
      color: var(--teal-600);
      font-size: 16px;
      margin-top: 2px;
    }
    
    .progress { 
      height: 8px; 
      width: 100%; 
      background: #f1f5f9; 
      border-radius: 999px; 
      overflow: hidden; 
      margin-top: 8px;
    }
    .progress > span { 
      display: block; 
      height: 100%; 
      background: var(--teal-600); 
      transition: width 0.3s ease;
    }
    
    .badge { 
      font-size: 12px; 
      padding: 4px 8px; 
      border-radius: 999px; 
      border: 1px solid var(--line); 
    }
    .status-active { background: var(--green-50); color: #065f46; border-color: #bbf7d0; }
    .status-warning { background: var(--amber-50); color: #7c2d12; border-color: #fed7aa; }
    
    .announcement-item {
      padding: 16px;
      background: #f8fafc;
      border-radius: 8px;
      border-left: 3px solid var(--teal-600);
      margin-bottom: 12px;
    }
    .announcement-item.urgent {
      border-left-color: var(--rose-600);
      background: var(--rose-50);
    }
    .announcement-title {
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 14px;
    }
    .announcement-meta {
      font-size: 12px;
      color: var(--muted);
    }
    
    .btn {
      background: var(--teal-600);
      color: white;
      border: 0;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      font-size: 14px;
      transition: all 0.2s;
    }
    .btn:hover {
      background: var(--teal-700);
      transform: translateY(-1px);
    }
    .btn-secondary {
      background: var(--muted);
    }
    .btn-secondary:hover {
      background: #475569;
    }
  </style>
</head>
<body>
  <div class="shell">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="profile">
        <div class="avatar"></div>
        <div>
          <div style="font-weight:600" id="sidebarUserName">Sarah</div>
          <div class="muted" style="font-size:12px" id="sidebarUserEmail">sarah@company.com</div>
        </div>
      </div>

      <nav class="nav">
        <button class="active" data-section="dashboard">📊 Dashboard</button>
        <button data-section="profile">👤 Profile</button>
        <button data-section="leave">📋 Leave & Attendance</button>
        <button data-section="workload">⚖️ Workload Assessment</button>
        <button data-section="feedback">💬 Anonymous Feedback</button>
        <button data-section="actions">⚡ Quick Actions</button>
        <button data-section="announcements">📢 Announcements</button>
      </nav>

      <button class="logout" id="sidebarLogoutBtn">Logout</button>
    </aside>

    <!-- Main Content -->
    <main>
           <!-- Header with User Info -->
     <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding: 16px; background: var(--card); border-radius: 12px; border: 1px solid var(--line);">
       <div>
         <div style="font-size: 14px; color: var(--muted); margin-bottom: 4px;">Welcome back</div>
         <div style="font-size: 18px; font-weight: 600; color: var(--teal-600);" id="userName">Sarah</div>
       </div>
       <div style="display: flex; align-items: center; gap: 12px;">
         <div style="font-size: 14px; color: var(--muted);" id="userEmail">sarah@company.com</div>
         <button class="btn btn-secondary" id="logoutBtn" style="padding: 8px 16px; font-size: 12px;">Logout</button>
       </div>
     </div>

     <!-- Navigation Test Section -->
     <div style="margin-bottom: 16px; padding: 16px; background: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px;">
       <h4 style="margin: 0 0 8px; color: #d97706;">🧪 Navigation Test</h4>
       <p style="margin: 0 0 12px; font-size: 14px;">Click any navigation button in the sidebar to test. You should see console logs and visual feedback.</p>
       <div style="display: flex; gap: 8px; flex-wrap: wrap;">
         <button onclick="testNavigation('dashboard')" style="padding: 6px 12px; background: #059669; color: white; border: 0; border-radius: 4px; cursor: pointer; font-size: 12px;">Test Dashboard</button>
         <button onclick="testNavigation('profile')" style="padding: 6px 12px; background: #0891b2; color: white; border: 0; border-radius: 4px; cursor: pointer; font-size: 12px;">Test Profile</button>
         <button onclick="testNavigation('leave')" style="padding: 6px 12px; background: #d97706; color: white; border: 0; border-radius: 4px; cursor: pointer; font-size: 12px;">Test Leave</button>
       </div>
     </div>

    <!-- Header -->
    <div class="header">
      <div class="welcome">Welcome back, <span id="displayName">Sarah</span>! 👋</div>
      <div class="subtitle">Here's how you're doing this week</div>
    </div>

    <!-- Overview Stats -->
    <section class="grid cols-3" style="margin-bottom: 32px" data-section="dashboard">
      <div class="stat tone-teal">
        <div style="background:#fff; padding:12px; border-radius:16px; box-shadow:0 2px 4px rgba(0,0,0,.08);">📊</div>
        <div>
          <div class="value">78</div>
          <div class="label">Well-being Score</div>
        </div>
      </div>
      <div class="stat tone-green">
        <div style="background:#fff; padding:12px; border-radius:16px; box-shadow:0 2px 4px rgba(0,0,0,.08);">⚡</div>
        <div>
          <div class="value">85</div>
          <div class="label">Productivity</div>
        </div>
      </div>
      <div class="stat tone-cyan">
        <div style="background:#fff; padding:12px; border-radius:16px; box-shadow:0 2px 4px rgba(0,0,0,.08);">🎯</div>
        <div>
          <div class="value">6</div>
          <div class="label">Goals Completed</div>
        </div>
      </div>
    </section>

    <!-- Main Content Grid -->
    <div class="grid cols-2" data-section="dashboard">
      <!-- Well-being Overview -->
      <div class="card">
        <h3>Your Well-being Overview</h3>
        <div class="wellbeing-score">
          <div class="score-circle score-good">78</div>
          <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">Good</div>
          <div style="color: var(--muted); font-size: 14px;">You're doing well! Keep it up.</div>
        </div>
        
        <div class="tips-section">
          <h4>💡 Tips for this week</h4>
          <div class="tip-item">
            <span class="tip-icon">✅</span>
            <span>Take regular breaks every 90 minutes</span>
          </div>
          <div class="tip-item">
            <span class="tip-icon">✅</span>
            <span>Practice deep breathing exercises</span>
          </div>
          <div class="tip-item">
            <span class="tip-icon">✅</span>
            <span>Stay hydrated - aim for 8 glasses daily</span>
          </div>
        </div>
      </div>

      <!-- Mood Tracker -->
      <div class="card">
        <h3>How are you feeling today?</h3>
        <div class="mood-tracker">
          <div class="mood-option" data-mood="5">
            <span class="mood-emoji">😊</span>
            <span>Great - I'm feeling productive and happy</span>
          </div>
          <div class="mood-option" data-mood="4">
            <span class="mood-emoji">🙂</span>
            <span>Good - generally positive mood</span>
          </div>
          <div class="mood-option" data-mood="3">
            <span class="mood-emoji">😐</span>
            <span>Okay - neutral, neither good nor bad</span>
          </div>
          <div class="mood-option" data-mood="2">
            <span class="mood-emoji">😕</span>
            <span>Stressed - feeling overwhelmed</span>
          </div>
          <div class="mood-option" data-mood="1">
            <span class="mood-emoji">😰</span>
            <span>Struggling - need support</span>
          </div>
        </div>
        
        <div style="margin-top: 20px; text-align: center;">
          <button class="btn" id="submitMood">Submit Today's Mood</button>
        </div>
        
        <div id="moodSubmitted" style="display: none; margin-top: 16px; padding: 12px; background: var(--green-50); border-radius: 8px; text-align: center; color: var(--green-600);">
          ✅ Mood submitted! Thank you for sharing.
        </div>
      </div>

      <!-- This Week's Progress -->
      <div class="card">
        <h3>This Week's Progress</h3>
        <div class="chart-wrap">
          <canvas id="weeklyChart"></canvas>
        </div>
      </div>

      <!-- Recent Announcements -->
      <div class="card">
        <h3>Recent Announcements</h3>
        <div id="announcementsList">
          <div class="announcement-item">
            <div class="announcement-title">Team Meeting Tomorrow</div>
            <div style="font-size: 13px; margin-bottom: 8px;">Weekly sync at 10 AM. Please prepare your updates.</div>
            <div class="announcement-meta">1 hour ago • All Employees</div>
          </div>
          <div class="announcement-item urgent">
            <div class="announcement-title">System Maintenance</div>
            <div style="font-size: 13px; margin-bottom: 8px;">Platform will be down for 2 hours tonight for updates.</div>
            <div class="announcement-meta">3 hours ago • All Employees • Urgent</div>
          </div>
        </div>
      </div>



      


    </div>

    <!-- Individual Section Cards for Sidebar Navigation -->
    
    <!-- Profile Section -->
    <div class="card" data-section="profile" style="display: none;">
      <h3>My Profile</h3>
      <div style="display: grid; gap: 16px;">
        <div style="display: flex; align-items: center; gap: 16px;">
          <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--teal-600), var(--cyan-600)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; font-weight: 600;" id="profileInitials2">S</div>
          <div>
            <div style="font-size: 18px; font-weight: 600; margin-bottom: 4px;" id="profileName2">Sarah Johnson</div>
            <div style="font-size: 14px; color: var(--muted);" id="profilePosition2">Software Developer</div>
          </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
          <div>
            <div style="font-size: 12px; color: var(--muted); margin-bottom: 4px;">Department</div>
            <div style="font-size: 14px; font-weight: 500;" id="profileDepartment2">Engineering</div>
          </div>
          <div>
            <div style="font-size: 12px; color: var(--muted); margin-bottom: 4px;">Employee ID</div>
            <div style="font-size: 14px; font-weight: 500;" id="profileId2">EMP-2024-001</div>
          </div>
          <div>
            <div style="font-size: 12px; color: var(--muted); margin-bottom: 4px;">Email</div>
            <div style="font-size: 14px; font-weight: 500;" id="profileEmail2">sarah@company.com</div>
          </div>
          <div>
            <div style="font-size: 12px; color: var(--muted); margin-bottom: 4px;">Phone</div>
            <div style="font-size: 14px; font-weight: 500;" id="profilePhone2">+1 (555) 123-4567</div>
          </div>
        </div>
        
        <button class="btn btn-secondary" onclick="editProfile()" style="margin-top: 8px;">✏️ Edit Profile</button>
      </div>
    </div>

    <!-- Quick Actions Section -->
    <div class="card" data-section="actions" style="display: none;">
      <h3>Quick Actions</h3>
      <div style="display: grid; gap: 12px;">
        <button class="btn" onclick="requestTimeOff()">🏖️ Request Time Off</button>
        <button class="btn btn-secondary" onclick="scheduleMeeting()">📅 Schedule 1:1 Meeting</button>
        <button class="btn btn-secondary" onclick="reportIssue()">🚨 Report an Issue</button>
        <button class="btn btn-secondary" onclick="viewResources()">📚 View Resources</button>
      </div>
      
      <div style="margin-top: 24px; padding: 16px; background: #f8fafc; border-radius: 8px;">
        <h4 style="margin: 0 0 8px; font-size: 14px;">Need Help?</h4>
        <p style="margin: 0; font-size: 13px; color: var(--muted); line-height: 1.4;">
          Our HR team is here to support you. Don't hesitate to reach out if you need assistance with anything.
        </p>
      </div>
    </div>

         <!-- Announcements Section -->
     <div class="card" data-section="announcements" style="display: none;">
       <h3>Recent Announcements</h3>
       <div id="announcementsList2">
         <div class="announcement-item">
           <div class="announcement-title">Team Meeting Tomorrow</div>
           <div style="font-size: 13px; margin-bottom: 8px;">Weekly sync at 10 AM. Please prepare your updates.</div>
           <div class="announcement-meta">1 hour ago • All Employees</div>
         </div>
         <div class="announcement-item urgent">
           <div class="announcement-title">System Maintenance</div>
           <div style="font-size: 13px; margin-bottom: 8px;">Platform will be down for 2 hours tonight for updates.</div>
           <div class="announcement-meta">3 hours ago • All Employees • Urgent</div>
         </div>
       </div>
     </div>

     <!-- Workload Self-Assessment Section -->
     <div class="card" data-section="workload" style="display: none;">
       <h3>Workload Self-Assessment</h3>
       <div style="margin-bottom: 20px;">
         <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
           <span style="font-size: 14px;">How would you rate your current workload?</span>
           <span style="font-weight: 600; color: var(--teal-600);" id="workloadValue2">5</span>
         </div>
         <input type="range" id="workloadSlider2" min="1" max="10" value="5" style="width: 100%; margin-bottom: 12px;">
         <div style="display: flex; justify-content: space-between; font-size: 12px; color: var(--muted);">
           <span>Very Light</span>
           <span>Very Heavy</span>
         </div>
       </div>
       
       <div style="margin-bottom: 16px;">
         <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Additional comments:</label>
         <textarea id="workloadComments2" placeholder="Any specific challenges or concerns? (optional)" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px; resize: vertical; min-height: 60px;"></textarea>
       </div>
       
       <button class="btn" id="submitWorkload2">Submit Workload Assessment</button>
       
       <div id="workloadSubmitted2" style="display: none; margin-top: 16px; padding: 12px; background: var(--green-50); border-radius: 8px; text-align: center; color: var(--green-600);">
         ✅ Workload assessment submitted!
       </div>
     </div>

     <!-- Leave & Attendance Overview Section -->
     <div class="card" data-section="leave" style="display: none;">
       <h3>Leave & Attendance Overview</h3>
       <div style="display: grid; gap: 16px;">
         <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
           <div style="text-align: center; padding: 16px; background: var(--teal-50); border-radius: 8px;">
             <div style="font-size: 24px; font-weight: 700; color: var(--teal-600);" id="leaveBalance2">15</div>
             <div style="font-size: 12px; color: var(--muted);">Days Remaining</div>
           </div>
           <div style="text-align: center; padding: 16px; background: var(--cyan-50); border-radius: 8px;">
             <div style="font-size: 24px; font-weight: 700; color: var(--cyan-600);" id="attendanceRate2">98%</div>
             <div style="font-size: 12px; color: var(--muted);">Attendance Rate</div>
           </div>
         </div>
         
         <div>
           <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">Recent Leave Requests</div>
           <div id="leaveRequests2" style="display: grid; gap: 8px;">
             <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px; background: #f8fafc; border-radius: 6px;">
               <div>
                 <div style="font-size: 13px; font-weight: 500;">Vacation</div>
                 <div style="font-size: 11px; color: var(--muted);">Dec 15-20, 2024</div>
               </div>
               <span class="badge status-active">Approved</span>
             </div>
             <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px; background: #f8fafc; border-radius: 6px;">
               <div>
                 <div style="font-size: 13px; font-weight: 500;">Sick Leave</div>
                 <div style="font-size: 11px; color: var(--muted);">Nov 28, 2024</div>
               </div>
               <span class="badge status-active">Approved</span>
             </div>
           </div>
         </div>
         
         <button class="btn" onclick="requestLeave()">📋 Request Leave</button>
       </div>
     </div>

     <!-- Anonymous Feedback Section -->
     <div class="card" data-section="feedback" style="display: none;">
       <h3>Anonymous Feedback</h3>
       <div style="margin-bottom: 16px;">
         <p style="font-size: 14px; color: var(--muted); margin-bottom: 16px;">
           Share your thoughts, suggestions, or concerns anonymously. Your feedback helps us improve the workplace environment.
         </p>
       </div>
       
       <form id="feedbackForm2" style="display: grid; gap: 16px;">
         <div>
           <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Feedback Category</label>
           <select id="feedbackCategory2" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
             <option value="">Select a category</option>
             <option value="workplace">Workplace Environment</option>
             <option value="management">Management</option>
             <option value="processes">Processes & Procedures</option>
             <option value="benefits">Benefits & Compensation</option>
             <option value="culture">Company Culture</option>
             <option value="other">Other</option>
           </select>
         </div>
         
         <div>
           <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Your Feedback</label>
           <textarea id="feedbackContent2" placeholder="Please share your feedback here..." required style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px; resize: vertical; min-height: 100px;"></textarea>
         </div>
         
         <div>
           <label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
             <input type="checkbox" id="feedbackAnonymous2" checked style="margin: 0;">
             Submit anonymously
           </label>
         </div>
         
         <button type="submit" class="btn">Submit Feedback</button>
       </form>
       
       <div id="feedbackSubmitted2" style="display: none; margin-top: 16px; padding: 12px; background: var(--green-50); border-radius: 8px; text-align: center; color: var(--green-600);">
         ✅ Thank you for your feedback! It has been submitted anonymously.
       </div>
     </div>

    </main>
  </div>

  <script>
    // ===== AUTHENTICATION & SECURITY =====
    
    // Check if user is logged in and has employee role
    function checkAuth() {
      const isLoggedIn = localStorage.getItem('isLoggedIn');
      const userRole = localStorage.getItem('userRole');
      const userEmail = localStorage.getItem('userEmail');
      
      if (!isLoggedIn || userRole !== 'employee') {
        // Redirect to login if not authenticated or not employee
        window.location.href = '/login';
        return false;
      }
      
      // Update user info in the UI
      if (userEmail) {
        document.getElementById('userEmail').textContent = userEmail;
        // Extract name from email for demo purposes
        const name = userEmail.split('@')[0];
        const displayName = name.charAt(0).toUpperCase() + name.slice(1);
        document.getElementById('userName').textContent = displayName;
        document.getElementById('displayName').textContent = displayName;
        
        // Update profile section 2 (only if it exists)
        const profileName2 = document.getElementById('profileName2');
        const profileEmail2 = document.getElementById('profileEmail2');
        const profileInitials2 = document.getElementById('profileInitials2');
        
        if (profileName2) profileName2.textContent = displayName + ' Johnson';
        if (profileEmail2) profileEmail2.textContent = userEmail;
        if (profileInitials2) profileInitials2.textContent = displayName.charAt(0);
        
        // Update sidebar user info
        document.getElementById('sidebarUserName').textContent = displayName;
        document.getElementById('sidebarUserEmail').textContent = userEmail;
      }
      
      return true;
    }
    
    // Logout functionality
    document.getElementById('logoutBtn').addEventListener('click', function() {
      localStorage.removeItem('isLoggedIn');
      localStorage.removeItem('userRole');
      localStorage.removeItem('userEmail');
      window.location.href = '/redirect';
    });
    
    // Check authentication on page load
    if (!checkAuth()) {
      // Stop execution if not authenticated
      throw new Error('Authentication failed');
    }

    // Sidebar Navigation
    let currentSection = 'dashboard';

    // Initialize sidebar navigation
    function initializeNavigation() {
      console.log('Initializing navigation...');
      const navButtons = document.querySelectorAll('.nav button');
      console.log('Found nav buttons:', navButtons.length);
      
      navButtons.forEach(button => {
        button.addEventListener('click', function() {
          console.log('Button clicked:', this.dataset.section);
          const section = this.dataset.section;
          
          // Update active button
          document.querySelectorAll('.nav button').forEach(btn => btn.classList.remove('active'));
          this.classList.add('active');
          
          // Show/hide sections
          showSection(section);
          currentSection = section;
        });
      });
    }

    function showSection(sectionName) {
      console.log('Showing section:', sectionName);
      
      // Hide all sections first
      const allSections = document.querySelectorAll('[data-section]');
      console.log('Found sections to hide:', allSections.length);
      
      allSections.forEach(el => {
        el.style.display = 'none';
        console.log('Hiding section:', el.dataset.section);
      });
      
      // Show the selected section
      if (sectionName === 'dashboard') {
        // Show all dashboard sections
        const dashboardSections = document.querySelectorAll('[data-section="dashboard"]');
        console.log('Found dashboard sections:', dashboardSections.length);
        
        dashboardSections.forEach(el => {
          el.style.display = 'grid';
          console.log('Showing dashboard section:', el.dataset.section);
        });
      } else {
        // Show individual section
        const sectionElement = document.querySelector(`[data-section="${sectionName}"]`);
        if (sectionElement) {
          console.log('Showing individual section:', sectionName);
          sectionElement.style.display = 'block';
          sectionElement.style.maxWidth = '800px';
          sectionElement.style.margin = '0 auto';
          
          // Add visual feedback
          sectionElement.style.border = '3px solid #059669';
          sectionElement.style.backgroundColor = '#f0fdf4';
          
          // Remove visual feedback after 2 seconds
          setTimeout(() => {
            sectionElement.style.border = '';
            sectionElement.style.backgroundColor = '';
          }, 2000);
        } else {
          console.log('Section not found:', sectionName);
          alert(`Section "${sectionName}" not found. Please check the console for details.`);
        }
      }
    }

    // Initialize navigation after DOM is loaded
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeNavigation);
    } else {
      initializeNavigation();
    }

    // Test navigation functionality
    console.log('Navigation script loaded');
    console.log('Current sections found:', document.querySelectorAll('[data-section]').length);
    console.log('Nav buttons found:', document.querySelectorAll('.nav button').length);

    // Test navigation function
    function testNavigation(sectionName) {
      console.log('Testing navigation to:', sectionName);
      showSection(sectionName);
      
      // Update active button
      document.querySelectorAll('.nav button').forEach(btn => btn.classList.remove('active'));
      const activeButton = document.querySelector(`[data-section="${sectionName}"]`);
      if (activeButton) {
        activeButton.classList.add('active');
      }
    }

    // Sidebar logout functionality
    document.getElementById('sidebarLogoutBtn').addEventListener('click', function() {
      localStorage.removeItem('isLoggedIn');
      localStorage.removeItem('userRole');
      localStorage.removeItem('userEmail');
      window.location.href = '/redirect';
    });
    
    // ===== DASHBOARD FUNCTIONALITY =====

    // Enhanced Mood Tracker Functionality
    let selectedMood = null;
    let selectedEmoji = null;
    
    document.querySelectorAll('.mood-option').forEach(option => {
      option.addEventListener('click', function() {
        // Remove previous selection
        document.querySelectorAll('.mood-option').forEach(opt => opt.classList.remove('selected'));
        // Add selection to clicked option
        this.classList.add('selected');
        selectedMood = this.dataset.mood;
        selectedEmoji = this.dataset.emoji;
      });
    });
    
         document.getElementById('submitMood').addEventListener('click', function() {
       if (!selectedMood) {
         alert('Please select a mood!');
         return;
       }
      
      document.getElementById('moodSubmitted').style.display = 'block';
      this.textContent = 'Mood Submitted';
      this.disabled = true;
      this.style.background = 'var(--green-600)';
      
             // In a real app, this would send data to the server
       console.log('Mood submitted:', { mood: selectedMood, emoji: selectedEmoji });
    });

         // Workload Self-Assessment Functionality (Section 2)
     const workloadSlider2 = document.getElementById('workloadSlider2');
     const workloadValue2 = document.getElementById('workloadValue2');
     
     if (workloadSlider2) {
       workloadSlider2.addEventListener('input', function() {
         workloadValue2.textContent = this.value;
       });
     }
     
     if (document.getElementById('submitWorkload2')) {
       document.getElementById('submitWorkload2').addEventListener('click', function() {
         const workload = workloadSlider2.value;
         const comments = document.getElementById('workloadComments2').value;
         
         document.getElementById('workloadSubmitted2').style.display = 'block';
         this.textContent = 'Assessment Submitted';
         this.disabled = true;
         this.style.background = 'var(--green-600)';
         
         // In a real app, this would send data to the server
         console.log('Workload assessment submitted:', { workload, comments });
       });
     }

     // Anonymous Feedback Form (Section 2)
     if (document.getElementById('feedbackForm2')) {
       document.getElementById('feedbackForm2').addEventListener('submit', function(e) {
         e.preventDefault();
         
         const category = document.getElementById('feedbackCategory2').value;
         const content = document.getElementById('feedbackContent2').value;
         const isAnonymous = document.getElementById('feedbackAnonymous2').checked;
         
         if (!category || !content.trim()) {
           alert('Please select a category and provide feedback content.');
           return;
         }
         
         document.getElementById('feedbackSubmitted2').style.display = 'block';
         this.style.display = 'none';
         
         // In a real app, this would send data to the server
         console.log('Feedback submitted:', { category, content, isAnonymous });
       });
     }

    // Profile Management
    function editProfile() {
      const modal = createModal('Edit Profile', `
        <form id="profileForm" style="display: grid; gap: 16px;">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
            <div>
              <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">First Name</label>
              <input type="text" id="editFirstName" value="Sarah" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
            </div>
            <div>
              <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Last Name</label>
              <input type="text" id="editLastName" value="Johnson" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
            </div>
          </div>
          <div>
            <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Position</label>
            <input type="text" id="editPosition" value="Software Developer" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
          </div>
          <div>
            <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Department</label>
            <select id="editDepartment" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
              <option value="Engineering" selected>Engineering</option>
              <option value="Marketing">Marketing</option>
              <option value="Sales">Sales</option>
              <option value="HR">HR</option>
              <option value="Finance">Finance</option>
            </select>
          </div>
          <div>
            <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Phone Number</label>
            <input type="tel" id="editPhone" value="+1 (555) 123-4567" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
          </div>
          <div style="display: flex; gap: 8px; justify-content: flex-end;">
            <button type="button" onclick="closeModal()" style="background: var(--muted); color: white; border: 0; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Cancel</button>
            <button type="submit" style="background: var(--teal-600); color: white; border: 0; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 500;">Save Changes</button>
          </div>
        </form>
      `);
      
      // Handle form submission
      document.getElementById('profileForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const formData = {
          firstName: document.getElementById('editFirstName').value,
          lastName: document.getElementById('editLastName').value,
          position: document.getElementById('editPosition').value,
          department: document.getElementById('editDepartment').value,
          phone: document.getElementById('editPhone').value
        };
        
        // Update the profile display (only if elements exist)
        const profileName2 = document.getElementById('profileName2');
        const profilePosition2 = document.getElementById('profilePosition2');
        const profileDepartment2 = document.getElementById('profileDepartment2');
        const profilePhone2 = document.getElementById('profilePhone2');
        const profileInitials2 = document.getElementById('profileInitials2');
        
        if (profileName2) profileName2.textContent = formData.firstName + ' ' + formData.lastName;
        if (profilePosition2) profilePosition2.textContent = formData.position;
        if (profileDepartment2) profileDepartment2.textContent = formData.department;
        if (profilePhone2) profilePhone2.textContent = formData.phone;
        if (profileInitials2) profileInitials2.textContent = formData.firstName.charAt(0);
        
        closeModal();
        showNotification('Profile updated successfully!', 'success');
        console.log('Profile updated:', formData);
      });
    }

    // Leave Management
    function requestLeave() {
      requestTimeOff(); // Reuse the time off request functionality
    }

    // Utility Functions
    function createModal(title, content) {
      // Remove existing modal if any
      const existingModal = document.querySelector('.modal-overlay');
      if (existingModal) {
        existingModal.remove();
      }
      
      const modal = document.createElement('div');
      modal.className = 'modal-overlay';
      modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      `;
      
      modal.innerHTML = `
        <div style="background: white; padding: 24px; border-radius: 12px; max-width: 500px; width: 100%; max-height: 80vh; overflow-y: auto;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 style="margin: 0; color: var(--teal-600);">${title}</h3>
            <button onclick="closeModal()" style="background: none; border: 0; font-size: 24px; cursor: pointer; color: var(--muted);">&times;</button>
          </div>
          ${content}
        </div>
      `;
      
      document.body.appendChild(modal);
      return modal;
    }
    
    function closeModal() {
      const modal = document.querySelector('.modal-overlay');
      if (modal) {
        modal.remove();
      }
    }
    
    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? 'var(--green-600)' : 'var(--rose-600)'};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        z-index: 1001;
        font-size: 14px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      `;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }
    
    function downloadResource(type) {
      const resources = {
        handbook: { name: 'Employee_Handbook.pdf', content: 'Employee Handbook Content' },
        wellness: { name: 'Wellness_Resources.pdf', content: 'Wellness Resources Content' },
        career: { name: 'Career_Development.pdf', content: 'Career Development Content' }
      };
      
      const resource = resources[type];
      if (resource) {
        const blob = new Blob([resource.content], { type: 'application/pdf' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = resource.name;
        a.click();
        window.URL.revokeObjectURL(url);
        
        showNotification(`${resource.name} downloaded successfully!`, 'success');
      }
    }
    
    function showContacts() {
      const modal = createModal('Contact Information', `
        <div style="display: grid; gap: 16px;">
          <div style="padding: 16px; background: var(--teal-50); border-radius: 8px;">
            <h4 style="margin: 0 0 8px; color: var(--teal-600);">HR Team</h4>
            <p style="margin: 0 0 4px; font-size: 14px;"><strong>Email:</strong> hr@company.com</p>
            <p style="margin: 0 0 4px; font-size: 14px;"><strong>Phone:</strong> +1 (555) 987-6543</p>
          </div>
          
          <div style="padding: 16px; background: var(--rose-50); border-radius: 8px;">
            <h4 style="margin: 0 0 8px; color: var(--rose-600);">Emergency</h4>
            <p style="margin: 0 0 4px; font-size: 14px;"><strong>24/7 Hotline:</strong> +1 (800) 123-4567</p>
            <p style="margin: 0 0 4px; font-size: 14px;"><strong>Security:</strong> +1 (555) 111-2222</p>
          </div>
          
          <div style="padding: 16px; background: var(--cyan-50); border-radius: 8px;">
            <h4 style="margin: 0 0 8px; color: var(--cyan-600);">IT Support</h4>
            <p style="margin: 0 0 4px; font-size: 14px;"><strong>Email:</strong> support@company.com</p>
            <p style="margin: 0 0 4px; font-size: 14px;"><strong>Phone:</strong> +1 (555) 456-7890</p>
          </div>
          
          <div style="display: flex; justify-content: flex-end;">
            <button onclick="closeModal()" style="background: var(--muted); color: white; border: 0; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Close</button>
          </div>
        </div>
      `);
    }

    // Weekly Progress Chart
    const weeklyCtx = document.getElementById('weeklyChart');
    new Chart(weeklyCtx, {
      type: 'line',
      data: {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'],
        datasets: [
          { 
            label: 'Well-being', 
            data: [75, 78, 82, 79, 78], 
            borderColor: '#059669', 
            backgroundColor: 'rgba(5,150,105,0.1)', 
            tension: 0.4, 
            fill: true 
          },
          { 
            label: 'Productivity', 
            data: [80, 85, 88, 82, 85], 
            borderColor: '#0891b2', 
            backgroundColor: 'rgba(8,145,178,0.1)', 
            tension: 0.4, 
            fill: true 
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: { 
            beginAtZero: true, 
            max: 100, 
            grid: { color: '#eef2f7' } 
          },
          x: { 
            grid: { display: false } 
          }
        },
        plugins: { 
          legend: { 
            position: 'bottom',
            labels: {
              usePointStyle: true,
              padding: 20
            }
          } 
        }
      }
    });

    // Quick Action Functions
    function requestTimeOff() {
      const modal = createModal('Request Time Off', `
        <form id="timeOffForm" style="display: grid; gap: 16px;">
          <div>
            <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Leave Type</label>
            <select id="leaveType" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
              <option value="vacation">Vacation</option>
              <option value="sick">Sick Leave</option>
              <option value="personal">Personal Leave</option>
              <option value="bereavement">Bereavement</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
            <div>
              <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Start Date</label>
              <input type="date" id="startDate" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
            </div>
            <div>
              <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">End Date</label>
              <input type="date" id="endDate" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
            </div>
          </div>
          <div>
            <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Reason</label>
            <textarea id="leaveReason" placeholder="Please provide a reason for your leave request..." style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px; resize: vertical; min-height: 80px;"></textarea>
          </div>
          <div style="display: flex; gap: 8px; justify-content: flex-end;">
            <button type="button" onclick="closeModal()" style="background: var(--muted); color: white; border: 0; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Cancel</button>
            <button type="submit" style="background: var(--teal-600); color: white; border: 0; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 500;">Submit Request</button>
          </div>
        </form>
      `);
      
      // Set default dates
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      document.getElementById('startDate').value = tomorrow.toISOString().split('T')[0];
      
      const nextWeek = new Date();
      nextWeek.setDate(nextWeek.getDate() + 7);
      document.getElementById('endDate').value = nextWeek.toISOString().split('T')[0];
      
      // Handle form submission
      document.getElementById('timeOffForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const formData = {
          type: document.getElementById('leaveType').value,
          startDate: document.getElementById('startDate').value,
          endDate: document.getElementById('endDate').value,
          reason: document.getElementById('leaveReason').value
        };
        
        closeModal();
        showNotification('Time off request submitted successfully!', 'success');
        console.log('Time off request:', formData);
      });
    }
    
    function scheduleMeeting() {
      const modal = createModal('Schedule 1:1 Meeting', `
        <form id="meetingForm" style="display: grid; gap: 16px;">
          <div>
            <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Meeting Type</label>
            <select id="meetingType" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
              <option value="manager">With Manager</option>
              <option value="hr">With HR</option>
              <option value="mentor">With Mentor</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
            <div>
              <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Date</label>
              <input type="date" id="meetingDate" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
            </div>
            <div>
              <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Time</label>
              <input type="time" id="meetingTime" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
            </div>
          </div>
          <div>
            <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Agenda</label>
            <textarea id="meetingAgenda" placeholder="What would you like to discuss?" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px; resize: vertical; min-height: 80px;"></textarea>
          </div>
          <div style="display: flex; gap: 8px; justify-content: flex-end;">
            <button type="button" onclick="closeModal()" style="background: var(--muted); color: white; border: 0; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Cancel</button>
            <button type="submit" style="background: var(--teal-600); color: white; border: 0; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 500;">Schedule Meeting</button>
          </div>
        </form>
      `);
      
      // Set default date and time
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      document.getElementById('meetingDate').value = tomorrow.toISOString().split('T')[0];
      document.getElementById('meetingTime').value = '10:00';
      
      // Handle form submission
      document.getElementById('meetingForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const formData = {
          type: document.getElementById('meetingType').value,
          date: document.getElementById('meetingDate').value,
          time: document.getElementById('meetingTime').value,
          agenda: document.getElementById('meetingAgenda').value
        };
        
        closeModal();
        showNotification('Meeting scheduled successfully!', 'success');
        console.log('Meeting scheduled:', formData);
      });
    }
    
    function reportIssue() {
      const modal = createModal('Report an Issue', `
        <form id="issueForm" style="display: grid; gap: 16px;">
          <div>
            <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Issue Type</label>
            <select id="issueType" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
              <option value="technical">Technical Issue</option>
              <option value="workplace">Workplace Issue</option>
              <option value="harassment">Harassment/Bullying</option>
              <option value="safety">Safety Concern</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div>
            <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Priority</label>
            <select id="issuePriority" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
              <option value="low">Low</option>
              <option value="medium" selected>Medium</option>
              <option value="high">High</option>
              <option value="urgent">Urgent</option>
            </select>
          </div>
          <div>
            <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Subject</label>
            <input type="text" id="issueSubject" placeholder="Brief description of the issue" style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px;">
          </div>
          <div>
            <label style="font-size: 14px; color: var(--muted); display: block; margin-bottom: 8px;">Description</label>
            <textarea id="issueDescription" placeholder="Please provide detailed information about the issue..." style="width: 100%; padding: 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 14px; resize: vertical; min-height: 100px;"></textarea>
          </div>
          <div>
            <label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
              <input type="checkbox" id="issueAnonymous" style="margin: 0;">
              Report anonymously
            </label>
          </div>
          <div style="display: flex; gap: 8px; justify-content: flex-end;">
            <button type="button" onclick="closeModal()" style="background: var(--muted); color: white; border: 0; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Cancel</button>
            <button type="submit" style="background: var(--rose-600); color: white; border: 0; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 500;">Submit Report</button>
          </div>
        </form>
      `);
      
      // Handle form submission
      document.getElementById('issueForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const formData = {
          type: document.getElementById('issueType').value,
          priority: document.getElementById('issuePriority').value,
          subject: document.getElementById('issueSubject').value,
          description: document.getElementById('issueDescription').value,
          anonymous: document.getElementById('issueAnonymous').checked
        };
        
        closeModal();
        showNotification('Issue report submitted successfully!', 'success');
        console.log('Issue report:', formData);
      });
    }
    
    function viewResources() {
      const modal = createModal('Employee Resources', `
        <div style="display: grid; gap: 16px;">
          <div style="display: grid; gap: 12px;">
            <div style="padding: 16px; background: var(--teal-50); border-radius: 8px; border: 1px solid var(--teal-200);">
              <h4 style="margin: 0 0 8px; color: var(--teal-600);">📚 Employee Handbook</h4>
              <p style="margin: 0 0 12px; font-size: 14px; color: var(--muted);">Complete guide to company policies and procedures</p>
              <button onclick="downloadResource('handbook')" style="background: var(--teal-600); color: white; border: 0; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 12px;">Download PDF</button>
            </div>
            
            <div style="padding: 16px; background: var(--cyan-50); border-radius: 8px; border: 1px solid var(--cyan-200);">
              <h4 style="margin: 0 0 8px; color: var(--cyan-600);">🏥 Health & Wellness</h4>
              <p style="margin: 0 0 12px; font-size: 14px; color: var(--muted);">Mental health resources and wellness programs</p>
              <button onclick="downloadResource('wellness')" style="background: var(--cyan-600); color: white; border: 0; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 12px;">View Resources</button>
            </div>
            
            <div style="padding: 16px; background: var(--green-50); border-radius: 8px; border: 1px solid var(--green-200);">
              <h4 style="margin: 0 0 8px; color: var(--green-600);">💼 Career Development</h4>
              <p style="margin: 0 0 12px; font-size: 14px; color: var(--muted);">Training materials and career growth opportunities</p>
              <button onclick="downloadResource('career')" style="background: var(--green-600); color: white; border: 0; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 12px;">Browse Courses</button>
            </div>
            
            <div style="padding: 16px; background: var(--amber-50); border-radius: 8px; border: 1px solid var(--amber-200);">
              <h4 style="margin: 0 0 8px; color: var(--amber-600);">📞 Contact Information</h4>
              <p style="margin: 0 0 12px; font-size: 14px; color: var(--muted);">HR contacts and emergency numbers</p>
              <button onclick="showContacts()" style="background: var(--amber-600); color: white; border: 0; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 12px;">View Contacts</button>
            </div>
          </div>
          
          <div style="display: flex; justify-content: flex-end;">
            <button onclick="closeModal()" style="background: var(--muted); color: white; border: 0; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Close</button>
          </div>
        </div>
      `);
    }

    // Simulate real-time updates
    setInterval(() => {
      // Update break time progress
      const breakProgress = document.querySelector('.progress:nth-of-type(2) span');
      const currentBreak = parseInt(breakProgress.style.width) || 75;
      if (currentBreak < 100) {
        breakProgress.style.width = Math.min(currentBreak + 1, 100) + '%';
      }
    }, 30000); // Update every 30 seconds
  </script>
</body>
</html>

